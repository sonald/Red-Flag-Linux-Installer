Pangu安装程序1.0设计
===

目标
---
满足2012年之后开发的社区版桌面产品的安装需求。暂不考虑OEM、商业版需求。

范围
---
* 不支持网络安装，不支持无人职守安装，暂不支持文本安装，不支持安装到外接存储设备
(可能无法启动），不支持软件包定制（定制软件包由软件中心提供），不支持GPT分区表,
不支持resize一个分区做安装，不支持覆盖安装，不支持升级安装，不支持软raid，
不支持lvm，暂不支持一键安装。

* 支持硬盘安装，livecd、liveusb的桌面环境下安装到本地硬盘。为在虚拟机上安装
提供便利。

* 只支持ext4文件系统。

* 磁盘大小最低要求6G、内存最小1G，ISO大小不应超过1.5G，
建议正常使用磁盘大小12G以上、内存2G以上。如果不满足最低要求，给出警告提示，
但允许安装。

* 最小分辨率800x600，推荐1024x768

主要使用场景
---
下载ISO到本机：
- 要么刻录iso，从光盘安装，
- 要么自己dd iso到U盘，
- 要么使用iso里的脚本启动硬盘安装（只在linux系统使用），
- 要么使用虚拟机启动iso安装。

交互
---
1. 选择安装语言：包括简体中文、英文。
选择一种语言，界面自动刷新，并且该语言为安装后系统使用的语言。

2. 如果不满足最低配置要求，提示用户退出。

3. 查看并接受license：
只有接受才能继续安装。

4. 选择一种安装策略：
	默认选择简易。

    * 简易安装
	<br>选择一个已有分区进行安装，该分区被格式化为ext4，并挂载为根。
	如果当前为硬盘安装模式，且选择的分区为iso所在分区，提示用户分区不可选。
	如果选择的分区<6G，提示用户分区太小。
	如果当前存在swap分区，则安装后挂载所有已存在swap分区，如果没有则创建一个swap文件。

    * 全磁盘安装
	<br>如果有多于一个的本机磁盘，要求选择一块硬盘进行安装。
	如果当前为硬盘安装模式，且选择的硬盘为iso所在硬盘，提示用户硬盘不可选。
	首先提示用户会清除所有数据，确认继续后格式化磁盘。分区策略为：
    如果当前存在swap分区，则安装后挂载所有已存在swap分区，并且下面的步骤不再创建swap文件或分区。
	当<10G时，整磁盘建一个根分区，创建1G大小的swap文件。
	当<30G，创建和内存大小一样的swap分区，其余空间建一个根分区。
	当>30G，创建和内存大小一样的swap分区，创建一个`30G-swap分区大小`
	的根分区，其余建一格式化好的分区(不挂载)。

    * 高级安装方式
	<br>支持添加、删除、编辑操作。不支持检测磁盘空间是否足够，
	提示用户需要6G空间。如果当前为硬盘安装模式，提示用户iso所在分区。
    如果当前存在swap分区，则安装后挂载所有已存在swap分区，并且下面的步骤不再创建swap文件或分区。
    
		+ 添加：当所选的是free空间时，允许创建新分区。新建时填写大小、
		  分区文件系统类型（只能ext4或swap）、分区类型。
		+ 删除：允许单独删除主分区、逻辑分区和空的扩展分区。
		+ 编辑：只允许修改挂载点和文件系统类型。

	如果当前没有挂载点为根的分区，不允许下一步，并提示用户。

5. 选择grub安装位置
	* 如果当前是简易或全磁盘安装：
	默认不能选择装不装grub，
	不能选择装在哪个磁盘的mbr上，
	不能选择装在哪个磁盘分区上。
	原因是需求不多，使用者不容易理解。
	默认安装在sda上。

	* 如果当前是高级安装：
	能选择装不装grub，
	能选择装在哪个磁盘的mbr上，
	能选择装在启动分区上。

6. 时区默认北京、键盘默认en。

7. root默认不允许登陆。

8. 新建用户，只填用户名，无密码，默认允许sudo。

9. 添加主机名，默认为`用户名-qomo`

10. 安装系统
确认、格式化、安装。
--在此步骤之前可以随意前进后退，保持用户填写的数据--。
在确认时提示用户哪些操作可能会影响安装过程。

11. 提示安装完成。
